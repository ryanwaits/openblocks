import { createElement } from "react";
import { icons } from "lucide-react";

const CUSTOM_ICONS: Record<string, (props: { size: number; color: string }) => React.ReactElement> = {
  BlockChain: ({ size, color }) => (
    <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth={2} strokeLinecap="round" strokeLinejoin="round">
      <path d="M12 2 L20 7 L20 17 L12 22 L4 17 L4 7 Z" />
      <path d="M12 8 L16 10.5 L16 15.5 L12 18 L8 15.5 L8 10.5 Z" />
      <line x1="12" y1="2" x2="12" y2="8" />
      <line x1="20" y1="7" x2="16" y2="10.5" />
      <line x1="4" y1="7" x2="8" y2="10.5" />
      <line x1="20" y1="17" x2="16" y2="15.5" />
      <line x1="4" y1="17" x2="8" y2="15.5" />
      <line x1="12" y1="22" x2="12" y2="18" />
    </svg>
  ),
  FtToken: ({ size, color }) => (
    <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} fill={color} viewBox="0 0 14 14" focusable={false} aria-hidden="true">
      <path fillRule="evenodd" clipRule="evenodd" d="M2.00155 8.37514C1.98969 8.52494 2.04105 8.67881 2.15564 8.79339C2.26561 8.90337 2.41176 8.9551 2.55578 8.94861H4.96743C5.26113 8.94861 5.49922 8.71051 5.49922 8.41681C5.49922 8.12311 5.26113 7.88501 4.96743 7.88501H3.81608L8.99293 2.70813C9.20061 2.50045 9.20061 2.16373 8.99293 1.95605C8.78525 1.74837 8.44854 1.74837 8.24086 1.95605L3.06513 7.13181L3.06513 5.9827C3.06513 5.689 2.82704 5.45091 2.53334 5.45091C2.23964 5.45091 2.00155 5.689 2.00155 5.9827V8.37514ZM5.01142 10.892C4.80374 11.0997 4.80374 11.4364 5.01142 11.6441C5.21909 11.8517 5.55581 11.8517 5.76349 11.6441L10.9399 6.46759V7.61726C10.9399 7.91096 11.178 8.14906 11.4717 8.14906C11.7654 8.14906 12.0035 7.91096 12.0035 7.61726V5.21467C12.0123 5.06815 11.9607 4.91869 11.8487 4.80673C11.7397 4.69769 11.5951 4.6459 11.4522 4.65136H9.03763C8.74393 4.65136 8.50584 4.88945 8.50584 5.18316C8.50584 5.47686 8.74393 5.71495 9.03763 5.71495H10.1884L5.01142 10.892Z" />
    </svg>
  ),
  PrintEvent: ({ size, color }) => (
    <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} fill={color} viewBox="0 0 256 256" focusable={false} aria-hidden="true">
      <path d="M197.58,129.06,146,110l-19-51.62a15.92,15.92,0,0,0-29.88,0L78,110l-51.62,19a15.92,15.92,0,0,0,0,29.88L78,178l19,51.62a15.92,15.92,0,0,0,29.88,0L146,178l51.62-19a15.92,15.92,0,0,0,0-29.88ZM137,164.22a8,8,0,0,0-4.74,4.74L112,223.85,91.78,169A8,8,0,0,0,87,164.22L32.15,144,87,123.78A8,8,0,0,0,91.78,119L112,64.15,132.22,119a8,8,0,0,0,4.74,4.74L191.85,144ZM144,40a8,8,0,0,1,8-8h16V16a8,8,0,0,1,16,0V32h16a8,8,0,0,1,0,16H184V64a8,8,0,0,1-16,0V48H152A8,8,0,0,1,144,40ZM248,88a8,8,0,0,1-8,8h-8v8a8,8,0,0,1-16,0V96h-8a8,8,0,0,1,0-16h8V72a8,8,0,0,1,16,0v8h8A8,8,0,0,1,248,88Z" />
    </svg>
  ),
  ContractCall: ({ size, color }) => (
    <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} fill={color} viewBox="0 0 256 256" focusable={false} aria-hidden="true">
      <path d="M144.27,45.93a8,8,0,0,1,9.8-5.66,86.22,86.22,0,0,1,61.66,61.66,8,8,0,0,1-5.66,9.8A8.23,8.23,0,0,1,208,112a8,8,0,0,1-7.73-5.94,70.35,70.35,0,0,0-50.33-50.33A8,8,0,0,1,144.27,45.93Zm-2.33,41.8c13.79,3.68,22.65,12.54,26.33,26.33A8,8,0,0,0,176,120a8.23,8.23,0,0,0,2.07-.27,8,8,0,0,0,5.66-9.8c-5.12-19.16-18.5-32.54-37.66-37.66a8,8,0,1,0-4.13,15.46Zm81.94,95.35A56.26,56.26,0,0,1,168,232C88.6,232,24,167.4,24,88A56.26,56.26,0,0,1,72.92,32.12a16,16,0,0,1,16.62,9.52l21.12,47.15,0,.12A16,16,0,0,1,109.39,104c-.18.27-.37.52-.57.77L88,129.45c7.49,15.22,23.41,31,38.83,38.51l24.34-20.71a8.12,8.12,0,0,1,.75-.56,16,16,0,0,1,15.17-1.4l.13.06,47.11,21.11A16,16,0,0,1,223.88,183.08Zm-15.88-2s-.07,0-.11,0h0l-47-21.05-24.35,20.71a8.44,8.44,0,0,1-.74.56,16,16,0,0,1-15.75,1.14c-18.73-9.05-37.4-27.58-46.46-46.11a16,16,0,0,1,1-15.7,6.13,6.13,0,0,1,.57-.77L96,95.15l-21-47a.61.61,0,0,1,0-.12A40.2,40.2,0,0,0,40,88,128.14,128.14,0,0,0,168,216,40.21,40.21,0,0,0,208,181.07Z" />
    </svg>
  ),
  ContractDeploy: ({ size, color }) => (
    <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} fill={color} viewBox="0 0 26 26" focusable={false} aria-hidden="true">
      <path d="M5.60696 3.78432C6.11651 3.32273 6.71203 2.96657 7.35933 2.73629C8.00664 2.50601 8.69296 2.40615 9.37888 2.44245V4.17176C8.92823 4.147 8.47747 4.21844 8.05643 4.38135C7.6354 4.54426 7.25369 4.79491 6.93656 5.11673C6.32574 5.97624 6.03236 7.02194 6.10674 8.07451V17.7983C6.03236 18.8509 6.32574 19.8966 6.93656 20.7561C7.25115 21.1023 7.63846 21.3742 8.07057 21.5523C8.50268 21.7305 8.96884 21.8103 9.43546 21.7861V23.4776C8.74889 23.5126 8.06219 23.4113 7.41486 23.1794C6.76752 22.9475 6.17234 22.5896 5.66354 22.1263C5.16199 21.5625 4.78039 20.9022 4.54205 20.1857C4.30372 19.4692 4.21365 18.7115 4.27736 17.959V7.95166C4.20713 7.20308 4.28871 6.448 4.5172 5.73183C4.7457 5.01566 5.11638 4.35321 5.60696 3.78432Z" />
      <path d="M12.1279 3.78406C13.1581 2.85361 14.5147 2.37098 15.8998 2.4422V4.1715C15.4477 4.1466 14.9955 4.21794 14.5729 4.38082C14.1503 4.54369 13.767 4.79442 13.4481 5.11648C12.8406 5.97722 12.5506 7.02282 12.6277 8.07425V17.798C12.5506 18.8495 12.8406 19.8951 13.4481 20.7558C13.7635 21.101 14.1509 21.3722 14.5828 21.5502C15.0147 21.7283 15.4805 21.8087 15.947 21.7858V23.4774C15.2527 23.5177 14.5574 23.4189 13.9017 23.1869C13.246 22.9549 12.643 22.5942 12.1279 22.126C11.628 21.5615 11.2481 20.9009 11.0114 20.1844C10.7747 19.4679 10.6862 18.7106 10.7511 17.9587V7.95141C10.6867 7.19953 10.7756 6.44238 11.0122 5.72597C11.2489 5.00957 11.6285 4.34888 12.1279 3.78406Z" />
      <path d="M18.6675 3.78424C19.6982 2.85469 21.0545 2.37221 22.4394 2.44238V4.17168C21.9858 4.14603 21.532 4.21698 21.1078 4.37987C20.6835 4.54275 20.2986 4.79386 19.9782 5.11666C19.3788 5.99384 19.1052 7.05381 19.205 8.11223V17.7982C19.1279 18.8497 19.4179 19.8953 20.0254 20.756C20.3412 21.1006 20.7287 21.3715 21.1605 21.5495C21.5923 21.7275 22.0579 21.8082 22.5243 21.786V23.4775C21.1382 23.5441 19.7822 23.0583 18.7524 22.1262C18.2443 21.5651 17.8552 20.9063 17.6088 20.19C17.3625 19.4736 17.2639 18.7146 17.319 17.9589V7.95158C17.253 7.20181 17.3383 6.44638 17.57 5.73039C17.8017 5.01439 18.1749 4.35251 18.6675 3.78424Z" />
    </svg>
  ),
  NftImage: ({ size, color }) => (
    <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth={2} strokeLinecap="round" strokeLinejoin="round">
      <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
      <circle cx="8.5" cy="8.5" r="1.5" />
      <polyline points="21 15 16 10 5 21" />
    </svg>
  ),
  StxToken: ({ size, color }) => (
    <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} fill="none" viewBox="0 0 12 12" focusable={false} aria-hidden="true">
      <path fill={color} d="M10.9,6.7H1.1c-.155,0-.2.2-.2.3v.6c0,.2.1.3.2.3h3c.1,0,.2.1.2.1.061.087,0,.2,0,.2l-1.9,2.8c-.087.147,0,.3,0,.3.054.101.2.1.2.1h.7c.1,0,.2-.1.2-.1l2.2-3.3c.063-.089.1-.1.2-.1h.2c.1,0,.137.011.2.1l2.2,3.3s.1.1.2.1h.7s.146.001.2-.1c0,0,.087-.153,0-.3l-1.9-2.8s-.061-.113,0-.2c0,0,.1-.1.2-.1h3c.1,0,.2-.1.2-.3v-.6c0-.1-.045-.3-.2-.3Z" />
      <path fill={color} d="M1.1,5.3h9.8c.155,0,.2-.2.2-.3v-.6c0-.2-.1-.3-.2-.3h-3c-.1,0-.2-.1-.2-.1-.061-.087,0-.2,0-.2l1.9-2.8c.087-.147,0-.3,0-.3-.054-.101-.2-.1-.2-.1h-.7c-.1,0-.2.1-.2.1l-2.2,3.3c-.063.089-.1.1-.2.1h-.2c-.1,0-.137-.011-.2-.1L3.5.7s-.1-.1-.2-.1h-.7s-.146-.001-.2.1c0,0-.087.153,0,.3l1.9,2.8s.061.113,0,.2c0,0-.1.1-.2.1H1.1c-.1,0-.2.1-.2.3v.6c0,.1.045.3.2.3Z" />
    </svg>
  ),
};

interface NodeIconProps {
  icon: string;
  size: number;
  color: string;
}

export function NodeIcon({ icon, size, color }: NodeIconProps) {
  const custom = CUSTOM_ICONS[icon];
  if (custom) return custom({ size, color });

  const LucideIcon = icons[icon as keyof typeof icons];
  if (LucideIcon) return createElement(LucideIcon, { size, color });

  return null;
}
